while (scanf("%d %d", &p, &q)):

checks if at least one integer is read.



while (scanf("%d %d", &p, &q) == 2):

checks if exactly two integers are read. This is usually safer and more precise for this kind of input processing.


code for Quick find in C:
All numbers are  branches of the number 1.

#include<stdio.h>
#define N 10000

main(){
    int i,t,p,q,id[N];
    for(i=0;i<N;i++1)
        id[i] = i;
    printf("Input pair p q: ");
    while(scanf("%d %d,&p,&q)==2){
        if(id[p]==id[q])
            print("%d %d already connected.");
        else{
            for(t=id[p],i=0;i<N;i++){
                if(id[i]==t) id[i] = id[q];
                printf("pair p q not yet connected\n",p,q);
            }
            printf("Input pair p q: "):
    }
}